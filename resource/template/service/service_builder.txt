package {{.entity}}_service_builder

import (
	{{.entity}}_service "{{.pkg}}/section/{{.entity}}/service"
	{{.entity}}_service_impl "{{.pkg}}/section/{{.entity}}/service/impl"
	{{.entity}}_mapper "{{.pkg}}/section/{{.entity}}/mapper"
)

func (b *{{.TableName}}ServiceBuilder) Build() {{.entity}}_service.{{.TableName}}Service {
	if b.{{.tableName}}ServiceImpl.{{.TableName}}Mapper == nil && b.isStrict {
		panic("`{{.TableName}}Mapper` is required")
	}
	return b.{{.tableName}}ServiceImpl
}

func (b *{{.TableName}}ServiceBuilder) With{{.TableName}}Mapper(mapper {{.entity}}_mapper.{{.TableName}}Mapper) *{{.TableName}}ServiceBuilder {
	b.{{.tableName}}ServiceImpl.{{.TableName}}Mapper = mapper
	return b
}

// BUILDER
type {{.TableName}}ServiceBuilder struct {
  isStrict bool
	{{.tableName}}ServiceImpl *{{.entity}}_service_impl.{{.TableName}}ServiceImpl
}

func New{{.TableName}}ServiceBuilder() *{{.TableName}}ServiceBuilder {
	return &{{.TableName}}ServiceBuilder{
		{{.tableName}}ServiceImpl: &{{.entity}}_service_impl.{{.TableName}}ServiceImpl{},
	}
}

func (b *{{.TableName}}ServiceBuilder) UseStrict() *{{.TableName}}ServiceBuilder { 
  b.isStrict = true
  return b
}